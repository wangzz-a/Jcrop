<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Rect Object | Jcrop</title>
    <meta name="description" content="Javascript cropping engine">
    
    
    <link rel="preload" href="/assets/css/0.styles.fb1f3510.css" as="style"><link rel="preload" href="/assets/js/app.0ab68f22.js" as="script"><link rel="preload" href="/assets/js/28.9c620152.js" as="script"><link rel="prefetch" href="/assets/js/14.0bfdfd6f.js"><link rel="prefetch" href="/assets/js/1.dd923391.js"><link rel="prefetch" href="/assets/js/2.88e361a5.js"><link rel="prefetch" href="/assets/js/4.3687bdf3.js"><link rel="prefetch" href="/assets/js/5.db9ab719.js"><link rel="prefetch" href="/assets/js/6.b0b5e941.js"><link rel="prefetch" href="/assets/js/7.0099cf45.js"><link rel="prefetch" href="/assets/js/8.a5fd88be.js"><link rel="prefetch" href="/assets/js/9.d6bc196a.js"><link rel="prefetch" href="/assets/js/10.71ea00b4.js"><link rel="prefetch" href="/assets/js/11.a3f6bd9e.js"><link rel="prefetch" href="/assets/js/12.27616d51.js"><link rel="prefetch" href="/assets/js/13.256723be.js"><link rel="prefetch" href="/assets/js/15.37190fd6.js"><link rel="prefetch" href="/assets/js/16.5b128697.js"><link rel="prefetch" href="/assets/js/17.de62b502.js"><link rel="prefetch" href="/assets/js/18.88d8f439.js"><link rel="prefetch" href="/assets/js/19.4ce2cce5.js"><link rel="prefetch" href="/assets/js/20.d9f50b8a.js"><link rel="prefetch" href="/assets/js/21.96fd6ef5.js"><link rel="prefetch" href="/assets/js/22.24613bcd.js"><link rel="prefetch" href="/assets/js/23.ad31e5c0.js"><link rel="prefetch" href="/assets/js/24.32bf7545.js"><link rel="prefetch" href="/assets/js/25.c4c445c5.js"><link rel="prefetch" href="/assets/js/26.7a792e0c.js"><link rel="prefetch" href="/assets/js/27.7e314c9d.js"><link rel="prefetch" href="/assets/js/29.a9d274da.js"><link rel="prefetch" href="/assets/js/30.7c4e1aa3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fb1f3510.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Jcrop</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/guide/" class="nav-link">Docs</a></div><div class="nav-item"><a href="/examples/" class="nav-link">Examples</a></div><div class="nav-item"><a href="https://github.com/tapmodo/Jcrop" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/guide/" class="nav-link">Docs</a></div><div class="nav-item"><a href="/examples/" class="nav-link">Examples</a></div><div class="nav-item"><a href="https://github.com/tapmodo/Jcrop" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Documentation</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Reference</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/objects/rect.html" class="active sidebar-link">Rect Object</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/objects/rect.html#properties" class="sidebar-link">Properties</a></li><li class="sidebar-sub-header"><a href="/objects/rect.html#instance-methods" class="sidebar-link">Instance Methods</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/objects/rect.html#rect-normalize" class="sidebar-link">rect.normalize()</a></li><li class="sidebar-sub-header"><a href="/objects/rect.html#rect-rebound-w-h" class="sidebar-link">rect.rebound(w,h)</a></li><li class="sidebar-sub-header"><a href="/objects/rect.html#rect-scale-x-y" class="sidebar-link">rect.scale(x,y)</a></li><li class="sidebar-sub-header"><a href="/objects/rect.html#rect-center-w-h" class="sidebar-link">rect.center(w,h)</a></li><li class="sidebar-sub-header"><a href="/objects/rect.html#rect-round" class="sidebar-link">rect.round()</a></li></ul></li><li class="sidebar-sub-header"><a href="/objects/rect.html#static-methods" class="sidebar-link">Static Methods</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/objects/rect.html#rect-create-x-y-w-h" class="sidebar-link">Rect.create(x,y,w,h)</a></li><li class="sidebar-sub-header"><a href="/objects/rect.html#rect-from-el" class="sidebar-link">Rect.from(el)</a></li><li class="sidebar-sub-header"><a href="/objects/rect.html#rect-frompoints-p1-p2" class="sidebar-link">Rect.fromPoints(p1,p2)</a></li><li class="sidebar-sub-header"><a href="/objects/rect.html#rect-frompoint-p1-w-h-quad" class="sidebar-link">Rect.fromPoint(p1,w,h,quad)</a></li><li class="sidebar-sub-header"><a href="/objects/rect.html#rect-getmax-w-h-aspect" class="sidebar-link">Rect.getMax(w,h,aspect)</a></li></ul></li><li class="sidebar-sub-header"><a href="/objects/rect.html#source-code" class="sidebar-link">Source Code</a></li></ul></li><li><a href="/objects/domobj.html" class="sidebar-link">DomObj Object</a></li><li><a href="/objects/confobj.html" class="sidebar-link">ConfObj Object</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Examples</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Appendix</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="rect-object"><a href="#rect-object" aria-hidden="true" class="header-anchor">#</a> <code>Rect</code> Object</h1> <blockquote><p>The <code>Rect</code> class is the heart of the Jcrop engine. While it may appear to
be a plain old Javascript object, it has some unique behavior that makes
it easy to work with coordinates and crop selections.</p></blockquote> <p>A <code>Rect</code> object instance represents coordinates for an arbitrary
rectangle, usually top left and bottom right. Internally the class
is used to set or describe an existing crop selection. You may
use <code>Rect</code> objects when using the Jcrop API or to describe rectangles
within your own application.</p> <h2 id="properties"><a href="#properties" aria-hidden="true" class="header-anchor">#</a> Properties</h2> <p>The native properties of a <code>Rect</code> object are <code>x</code>, <code>y</code>, <code>w</code>, <code>h</code>. These
properties should only contain integers or floating point numbers that
represent the <code>x</code> and <code>y</code> top left corner of the crop, and the crop
dimentions as <code>w</code> and <code>h</code> for width and height, respectively.</p> <p>Getters and setters exist for <code>x2</code> and <code>y2</code>, if it is desirable to
know the secondary coordinates (usually the bottom-right point). If
you set <code>x2</code> or <code>y2</code>, the object's <code>w</code> and <code>h</code> values are updated as
if the secondary point had been moved.</p> <p>Additionally, <code>x1</code> and <code>y1</code> setters exist for cases where you want
to move the primary point without without moving the entire object.
Another way to say this is that <code>w</code> and <code>h</code> will be adjusted as if
only this point moved.</p> <p>To get the aspect ratio of the <code>Rect</code> object's current values,
a getter named <code>aspect</code> exists.</p> <h2 id="instance-methods"><a href="#instance-methods" aria-hidden="true" class="header-anchor">#</a> Instance Methods</h2> <h3 id="rect-normalize"><a href="#rect-normalize" aria-hidden="true" class="header-anchor">#</a> rect.normalize()</h3> <p>Rect coordinates may have negative values for <code>w</code> or <code>h</code> if the
secondary point is above or to the left of the primary point.
Calling the <code>normalize()</code> method will return a new <code>Rect</code> object
with adjusted values indicating a positive <code>w</code> and <code>h</code>. This method
is used internally by Jcrop to provide values that are easily
rendered regardless of the current orientation of the coordinates,
such as during a dragging operation.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> r <span class="token operator">=</span> Jcrop<span class="token punctuation">.</span>Rect<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">,</span><span class="token number">110</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> s <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>x<span class="token punctuation">,</span>r<span class="token punctuation">.</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; 110, -100</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>x<span class="token punctuation">,</span>s<span class="token punctuation">.</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; 10, 100</span>
</code></pre></div><h3 id="rect-rebound-w-h"><a href="#rect-rebound-w-h" aria-hidden="true" class="header-anchor">#</a> rect.rebound(w,h)</h3> <p>The <code>rebound()</code> method will move the Rect coordinates back into an
area inside of a box defined by the w,h parameters given. It returns
a <code>Rect</code> object with the rebounded coordinates. This method is used
internally to prevent a bounded crop from being dragged outside the
boundaries of the stage element.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> r <span class="token operator">=</span> Jcrop<span class="token punctuation">.</span>Rect<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> s <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token function">rebound</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>x<span class="token punctuation">,</span>r<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; -15, -20</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>x<span class="token punctuation">,</span>s<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; 0, 0</span>
</code></pre></div><h3 id="rect-scale-x-y"><a href="#rect-scale-x-y" aria-hidden="true" class="header-anchor">#</a> rect.scale(x,y)</h3> <p>Scales the width and height based on <code>x,y</code> scaling values,
usually somewhere between 1 and 0 for a percentage. Returns a
fresh <code>Rect</code> object with the width and height scaled.</p> <h3 id="rect-center-w-h"><a href="#rect-center-w-h" aria-hidden="true" class="header-anchor">#</a> rect.center(w,h)</h3> <p>Returns a new <code>Rect</code> object with <code>x,y</code> producing a region
centered within the space defined by <code>w,h</code>.</p> <h3 id="rect-round"><a href="#rect-round" aria-hidden="true" class="header-anchor">#</a> rect.round()</h3> <p>Especially when using aspect ratios, fractional values are very
possible, but not always desirable. Call the <code>round()</code> method and
get a totally new <code>Rect</code> with rounded values.</p> <h2 id="static-methods"><a href="#static-methods" aria-hidden="true" class="header-anchor">#</a> Static Methods</h2> <h3 id="rect-create-x-y-w-h"><a href="#rect-create-x-y-w-h" aria-hidden="true" class="header-anchor">#</a> Rect.create(x,y,w,h)</h3> <p>Creates a new <code>Rect</code> object with the given values.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> r <span class="token operator">=</span> Jcrop<span class="token punctuation">.</span>Rect<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="rect-from-el"><a href="#rect-from-el" aria-hidden="true" class="header-anchor">#</a> Rect.from(el)</h3> <p>Creates a new <code>Rect</code> object by reading <code>offsetTop</code>, <code>offsetLeft</code>,
<code>offsetWidth</code> and <code>offsetHeight</code> from the given DOM object. The
object should probably be in the DOM, as not all of these properties
may be set on an element that is not in the DOM.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'crop1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> r <span class="token operator">=</span> Jcrop<span class="token punctuation">.</span>Rect<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="rect-frompoints-p1-p2"><a href="#rect-frompoints-p1-p2" aria-hidden="true" class="header-anchor">#</a> Rect.fromPoints(p1,p2)</h3> <p>Creates a new <code>Rect</code> from coordinate points specified as arrays
(e.g. <code>[x1,y1]</code> and <code>[x2,y2]</code>).</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">110</span><span class="token punctuation">,</span><span class="token number">110</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> r <span class="token operator">=</span> Jcrop<span class="token punctuation">.</span>Rect<span class="token punctuation">.</span><span class="token function">fromPoints</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="rect-frompoint-p1-w-h-quad"><a href="#rect-frompoint-p1-w-h-quad" aria-hidden="true" class="header-anchor">#</a> Rect.fromPoint(p1,w,h,quad)</h3> <p>Creates a new <code>Rect</code> object anchored at a single point, such as <code>[10,10]</code>.
The Rect will be of size <code>w</code> and <code>h</code> and the direction is determined
by the value of <code>quad</code> which must be one of <code>tl</code>, <code>tr</code>, <code>bl</code>, or <code>br</code>
(the default) indicating top/bottom left/right quadrant.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> point <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> r <span class="token operator">=</span> Jcrop<span class="token punctuation">.</span>Rect<span class="token punctuation">.</span><span class="token function">fromPoint</span><span class="token punctuation">(</span>point<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token string">'br'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="rect-getmax-w-h-aspect"><a href="#rect-getmax-w-h-aspect" aria-hidden="true" class="header-anchor">#</a> Rect.getMax(w,h,aspect)</h3> <p>Returns an array of <code>[w,h]</code> representing maximum rectangle size
of <code>ratio</code> that fits within the given <code>w,h</code> size passed as parameters.
This function is used in conjunction with <code>Rect.fromPoint()</code> to
perform aspect ratio filtering when that feature is enabled.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> ratio <span class="token operator">=</span> <span class="token number">4</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>w<span class="token punctuation">,</span>h<span class="token punctuation">]</span> <span class="token operator">=</span> Jcrop<span class="token punctuation">.</span>Rect<span class="token punctuation">.</span><span class="token function">getMax</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span>ratio<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="source-code"><a href="#source-code" aria-hidden="true" class="header-anchor">#</a> Source Code</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* Rect class -- describes a rectangle with two points, usually
   top left and bottom right. It allows the second set of coordinates
   to be described as either w/h or x2/y2 and allows getting and
   setting of those values such that the object values will always be
   consistent with the latest input. It should be noted that it does not
   attempt to keep these points normalized. That is, you should expect
   to see the actual w/h properties to sometimes be negative values.
   To normalize the values, use the normalize method, which will return
   a new Rect object with normalized values.
*/</span>
<span class="token keyword">class</span> <span class="token class-name">Rect</span> <span class="token punctuation">{</span>

  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>w <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>h <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">set</span> <span class="token function">x1</span> <span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>w <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x2 <span class="token operator">-</span> v<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> v<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">set</span> <span class="token function">y1</span> <span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>h <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y2 <span class="token operator">-</span> v<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> v<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">get</span> <span class="token function">x2</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>w<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">set</span> <span class="token function">x2</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>w <span class="token operator">=</span> x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">get</span> <span class="token function">y2</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">get</span> <span class="token function">aspect</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>w<span class="token operator">/</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">set</span> <span class="token function">y2</span> <span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>h <span class="token operator">=</span> y <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">round</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Rect<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
      Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span>
      Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span>
      Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>w<span class="token punctuation">)</span><span class="token punctuation">,</span>
      Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">normalize</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>x1<span class="token punctuation">,</span>y1<span class="token punctuation">,</span>x2<span class="token punctuation">,</span>y2<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
      Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>x2<span class="token punctuation">)</span><span class="token punctuation">,</span>
      Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>y2<span class="token punctuation">)</span><span class="token punctuation">,</span>
      Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>x2<span class="token punctuation">)</span><span class="token punctuation">,</span>
      Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>y2<span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Rect<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span>y1<span class="token punctuation">,</span>x2<span class="token operator">-</span>x1<span class="token punctuation">,</span>y2<span class="token operator">-</span>y1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">rebound</span> <span class="token punctuation">(</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> rect <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>rect<span class="token punctuation">.</span>x<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span> rect<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>rect<span class="token punctuation">.</span>y<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span> rect<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>rect<span class="token punctuation">.</span>x2<span class="token operator">&gt;</span>w<span class="token punctuation">)</span> rect<span class="token punctuation">.</span>x <span class="token operator">=</span> w<span class="token operator">-</span>rect<span class="token punctuation">.</span>w<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>rect<span class="token punctuation">.</span>y2<span class="token operator">&gt;</span>h<span class="token punctuation">)</span> rect<span class="token punctuation">.</span>y <span class="token operator">=</span> h<span class="token operator">-</span>rect<span class="token punctuation">.</span>h<span class="token punctuation">;</span>
    <span class="token keyword">return</span> rect<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">scale</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    y <span class="token operator">=</span> y <span class="token operator">||</span> x<span class="token punctuation">;</span>
    <span class="token keyword">return</span> Rect<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token operator">*</span>x<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token operator">*</span>y<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>w<span class="token operator">*</span>x<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token operator">*</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">unscale</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    y <span class="token operator">=</span> y <span class="token operator">||</span> x<span class="token punctuation">;</span>
    <span class="token keyword">return</span> Rect<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token operator">/</span>x<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token operator">/</span>y<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>w<span class="token operator">/</span>x<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token operator">/</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">center</span> <span class="token punctuation">(</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Rect<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span>w <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>w<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span>h <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>w<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>h
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">toArray</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>w<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>h <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

Rect<span class="token punctuation">.</span><span class="token function-variable function">fromPoints</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>p1<span class="token punctuation">,</span>p2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>x1<span class="token punctuation">,</span>y1<span class="token punctuation">,</span>x2<span class="token punctuation">,</span>y2<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>p1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>p2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>p1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>p2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>p1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>p2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>p1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>p2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Rect<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span>y1<span class="token punctuation">,</span>x2<span class="token operator">-</span>x1<span class="token punctuation">,</span>y2<span class="token operator">-</span>y1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Rect<span class="token punctuation">.</span><span class="token function-variable function">create</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>w<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>h<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  c<span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
  c<span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
  c<span class="token punctuation">.</span>w <span class="token operator">=</span> w<span class="token punctuation">;</span>
  c<span class="token punctuation">.</span>h <span class="token operator">=</span> h<span class="token punctuation">;</span>
  <span class="token keyword">return</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Rect<span class="token punctuation">.</span><span class="token function-variable function">from</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>el<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> Rect<span class="token punctuation">.</span><span class="token function">fromArray</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  c<span class="token punctuation">.</span>x <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
  c<span class="token punctuation">.</span>y <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
  c<span class="token punctuation">.</span>w <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span>
  c<span class="token punctuation">.</span>h <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>
  <span class="token keyword">return</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Rect<span class="token punctuation">.</span><span class="token function-variable function">fromArray</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">return</span> Rect<span class="token punctuation">.</span>create<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> Rect<span class="token punctuation">.</span><span class="token function">fromPoints</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'fromArray method problem'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Rect<span class="token punctuation">.</span><span class="token function-variable function">sizeOf</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>el<span class="token punctuation">,</span>y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token keyword">return</span> Rect<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>el<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  c<span class="token punctuation">.</span>w <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span>
  c<span class="token punctuation">.</span>h <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>
  <span class="token keyword">return</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Rect<span class="token punctuation">.</span><span class="token function-variable function">getMax</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>w<span class="token punctuation">,</span>h<span class="token punctuation">,</span>aspect<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>w<span class="token operator">/</span>h<span class="token punctuation">)</span> <span class="token operator">&gt;</span> aspect<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">[</span> h<span class="token operator">*</span>aspect<span class="token punctuation">,</span> h <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token punctuation">[</span> w<span class="token punctuation">,</span> w<span class="token operator">/</span>aspect <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Rect<span class="token punctuation">.</span><span class="token function-variable function">fromPoint</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>point<span class="token punctuation">,</span>w<span class="token punctuation">,</span>h<span class="token punctuation">,</span>quad<span class="token operator">=</span><span class="token string">'br'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  c<span class="token punctuation">.</span>x <span class="token operator">=</span> point<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  c<span class="token punctuation">.</span>y <span class="token operator">=</span> point<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>quad<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'br'</span><span class="token punctuation">:</span>
      c<span class="token punctuation">.</span>x2 <span class="token operator">=</span> c<span class="token punctuation">.</span>x <span class="token operator">+</span> w<span class="token punctuation">;</span>
      c<span class="token punctuation">.</span>y2 <span class="token operator">=</span> c<span class="token punctuation">.</span>y <span class="token operator">+</span> h<span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'bl'</span><span class="token punctuation">:</span>
      c<span class="token punctuation">.</span>x2 <span class="token operator">=</span> c<span class="token punctuation">.</span>x <span class="token operator">-</span> w<span class="token punctuation">;</span>
      c<span class="token punctuation">.</span>y2 <span class="token operator">=</span> c<span class="token punctuation">.</span>y <span class="token operator">+</span> h<span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'tl'</span><span class="token punctuation">:</span>
      c<span class="token punctuation">.</span>x2 <span class="token operator">=</span> c<span class="token punctuation">.</span>x <span class="token operator">-</span> w<span class="token punctuation">;</span>
      c<span class="token punctuation">.</span>y2 <span class="token operator">=</span> c<span class="token punctuation">.</span>y <span class="token operator">-</span> h<span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'tr'</span><span class="token punctuation">:</span>
      c<span class="token punctuation">.</span>x2 <span class="token operator">=</span> c<span class="token punctuation">.</span>x <span class="token operator">+</span> w<span class="token punctuation">;</span>
      c<span class="token punctuation">.</span>y2 <span class="token operator">=</span> c<span class="token punctuation">.</span>y <span class="token operator">-</span> h<span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Rect<span class="token punctuation">;</span>

</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/guide/events.html" class="prev">
          Events and Handlers
        </a></span> <span class="next"><a href="/objects/domobj.html">
          DomObj Object
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/28.9c620152.js" defer></script><script src="/assets/js/app.0ab68f22.js" defer></script>
  </body>
</html>
